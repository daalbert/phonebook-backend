{"version":3,"sources":["components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","removePerson","name","number","onClick","Persons","persons","removePersonId","map","id","notificationType","Notification","message","type","style","notificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","baseUrl","personsService","getAll","axios","get","then","response","data","create","newObj","post","update","put","remove","delete","PersonForm","addPerson","handleNameChange","handleNumberChange","onSubmit","onChange","Filter","handleChange","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","setMessage","messageType","setMessageType","useEffect","setTimeout","filteredPersons","filter","p","match","RegExp","event","target","value","preventDefault","find","window","confirm","returnedPerson","catch","error","console","log","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e16040c3.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({ person,removePerson }) =>\n  <div>\n    {person.name} {person.number}&nbsp;\n    <button onClick={removePerson}>delete</button>\n  </div>\n\nconst Persons = ({ persons,removePersonId }) =>\n  persons.map(\n    (person) => <Person\n      key={person.id}\n      person={person}\n      removePerson={() => removePersonId(person.id)}\n    />\n  )\n\nexport default Persons","import React from 'react'\n\nexport const notificationType = {\n  'Status': 1,\n  'Error': 2\n}\n\nconst Notification = ({ message, type }) => {\n  if (message === null) {\n    return null\n  }\n  const style = type === notificationType.Error\n    ? notificationType.Error\n    : notificationType.Status\n\n  const notificationStyle = {\n    [notificationType.Status]: {\n      color: 'green',\n      background: 'lightgrey',\n      fontSize: '20px',\n      borderStyle: 'solid',\n      borderRadius: '5px',\n      padding: '10px',\n      marginBottom: '10px',\n    },\n    [notificationType.Error]: {\n      color: 'red',\n      background: 'lightgrey',\n      fontSize: '20px',\n      borderStyle: 'solid',\n      borderRadius: '5px',\n      padding: '10px',\n      marginBottom: '10px',\n    },\n  }\n\n  return (\n    <div style={notificationStyle[style]}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () =>\n  axios.get(baseUrl).then(response => response.data)\n\nconst create = (newObj) =>\n  axios.post(baseUrl, newObj).then(response => response.data)\n\nconst update = (id, newObj) =>\n  axios.put(`${baseUrl}/${id}`, newObj).then(response => response.data)\n\nconst remove = (id) =>\n  axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n\nconst personsService = {\n  getAll,\n  create,\n  update,\n  remove\n}\nexport default personsService","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport personsService from './services/persons'\nimport { notificationType } from './components/Notification'\n\nconst PersonForm = ({ addPerson,handleNameChange,handleNumberChange }) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>name: <input onChange={handleNameChange} /></div>\n      <div>number: <input onChange={handleNumberChange} /></div>\n      <div><button type=\"submit\">add</button></div>\n    </form>\n  )\n}\n\nconst Filter = ({ handleChange }) =>\n  <div>filter shown with<input onChange={handleChange} /></div>\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ message, setMessage] = useState(null)\n  const [ messageType, setMessageType ] = useState(notificationType.Status)\n\n  useEffect(() => {\n    personsService.getAll()\n      .then( persons =>\n        setPersons(persons)\n      )\n  }, [])\n\n  useEffect( () => {\n    if(message!==null) {\n      setTimeout( () => {\n        setMessage(null)\n        setMessageType(notificationType.Status)\n      },5000)\n    }\n  }, [message])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const person = persons.find( p => p.name===newName)\n    if(person) {\n      if(window.confirm( `${newName} is already added to phonebook, replace the old number with a new one?` )) {\n        personsService\n          .update(person.id, { ...person, number:newNumber })\n          //.catch( error => console.log(\"catch after update, before then error\",error))\n          .then( returnedPerson => {\n            setPersons(persons.map( person =>\n              person.id === returnedPerson.id ? returnedPerson : person\n            ))\n            setMessage(`Updated ${newName}`)\n          })\n          .catch( error => {\n            console.log(error.response.data)\n            setMessageType(notificationType.Error)\n            setMessage(error.response.data.error)\n            /*const msg = `Information of ${newName} has already been removed from server`\n            console.log(msg)\n            setMessageType(notificationType.Error)\n            setMessage(msg)*/\n            //setPersons( persons.filter( p => p.id !== person.id ))\n          })\n      }\n      return\n    }\n    personsService\n      .create( { name: newName, number:newNumber })\n      .then( returnedPerson => {\n        setPersons(persons.concat( returnedPerson ))\n        setMessage(`Added ${newName}`)\n      })\n      .catch( error => {\n        console.log(error.response.data)\n        setMessageType(notificationType.Error)\n        setMessage(error.response.data.error)\n      })\n  }\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleFilterChange = (event) => setNewFilter(event.target.value)\n  const removePersonId = (id) => {\n    if(!window.confirm(\n      `Delete ${persons.find(p => p.id===id).name}`\n    )) {\n      return\n    }\n\n    personsService.remove(id)\n      .then( () => {\n        setMessage(`Deleted ${persons.find(p => p.id===id).name}`)\n        setPersons( persons.filter(p => p.id!== id ))\n      })\n      .catch( error => console.log(error) )\n  }\n\n  const filteredPersons = newFilter\n    ? persons.filter( (p) => p.name.match(new RegExp(newFilter,'i')) )\n    : persons\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Notification message={message} type={messageType} />\n      <Filter handleChange={handleFilterChange} />\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={filteredPersons} removePersonId={removePersonId}/>\n    </>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}